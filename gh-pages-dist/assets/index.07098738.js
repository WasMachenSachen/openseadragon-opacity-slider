var B=Object.defineProperty,W=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var x=(n,i,o)=>i in n?B(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o,C=(n,i)=>{for(var o in i||(i={}))M.call(i,o)&&x(n,o,i[o]);if(S)for(var o of S(i))T.call(i,o)&&x(n,o,i[o]);return n},A=(n,i)=>W(n,$(i));const R=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))g(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function o(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerpolicy&&(s.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?s.credentials="include":c.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function g(c){if(c.ep)return;c.ep=!0;const s=o(c);fetch(c.href,s)}};R();const N="OpenSeadragon Opacity Slider";(function(n){if(!n.version||n.version.major<3)throw new Error(`This version of ${N} requires OpenSeadragon version 3.0.0+`);n.Viewer.prototype.opacityslider=function(e){this.Instance||(e=e||{},e.viewer=this,this.opacitysliderInstance=new n.OpacitySlider(e))},n.OpacitySlider=function(e){if(!e.layerInformation||!Array.isArray(e.layerInformation))throw new Error(`${N} requires options.layerInformation`);e.layerInformation.forEach(r=>{r.hidden||(r.hidden=!1)}),e.layerPickerHeading=e.layerPickerHeading?e.layerPickerHeading:"Choose layers:";let t=document.createElement("div");t.id="opacitySliderWrapperContent",document.getElementById("opacitySliderWrapper").appendChild(t).classList.add("osdos-opacity-layer-slider-wrapper"),(e.showLayerPicker||e.showLayerPicker===void 0)&&i(e),e.viewer.world.addHandler("add-item",function(r){let a=r.item.source.tilesUrl?`${r.item.source.tilesUrl.slice(0,-7)}.dzi`:r.item.source.url,d=e.layerInformation.filter(l=>l.source===a);r.item.osdosHidden=d.length?d[0].hidden:!1,o(e)}),console.log("Plugin Initialized")};function i(e){const t=document.createElement("div");t.classList.add("osdos-layer-picker-wrapper"),t.style="display: none;",t.id="checkboxWrapperContent";let r=document.createElement("h2");r.textContent=e.layerPickerHeading,t.appendChild(r);let a=document.createElement("ul");e.layerInformation.forEach(d=>{let l=document.createElement("li"),m=e.showLayerInformation||e.showLayerInformation===void 0?`<p>${d.layerNameExplanation}</p>`:"";l.innerHTML=`
        <input data-osdos='visibility-checkbox' type="checkbox" name="${d.layerName}" id="${d.layerName}" ${d.hidden?"":"checked"} data-osdos-source="${d.source}"/>
        <label for="${d.layerName}">${d.layerName}</label>
        ${m}
      `,a.appendChild(l)}),t.appendChild(a),document.querySelector("#opacitySliderWrapper").prepend(t),document.querySelectorAll("[data-osdos='visibility-checkbox']").forEach(d=>{d.addEventListener("click",l=>{H(l,e)})})}function o(e){let t=c(e),r=document.getElementById("opacitySliderWrapperContent");if(r.innerHTML="",t.forEach((a,d)=>{const l=document.createElement("div");l.className="osdos-layer-slider",l.setAttribute("data-osd-index",d);const m=document.createElement("div");if(m.className="osdos-layer-controls-wrapper",e.showRemove||e.showRemove===void 0){let u=document.createElement("button");u.setAttribute("data-osdos","remove-button"),u.classList.add("osdos-layer-slider-remove-button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="osdos-layer-slider-remove-button-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',u.addEventListener("click",()=>L(a.source,e)),m.appendChild(u)}if(e.sortable||e.sortable===void 0){const u=document.createElement("div");u.className="osdos-position-controls-wrapper";let y=document.createElement("button");y.setAttribute("data-osdos","up-button"),y.classList.add("osdos-layer-slider-up-button"),y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="osdos-layer-slider-up-button-icon" ><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>',y.addEventListener("click",()=>k(a.source,e)),u.appendChild(y);let f=document.createElement("button");f.setAttribute("data-osdos","down-button"),f.classList.add("osdos-layer-slider-down-button"),f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="osdos-layer-slider-down-button-icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',f.addEventListener("click",()=>I(a.source,e)),u.appendChild(f),m.appendChild(u)}let w=document.createElement("span");w.innerHTML=a.layerName,w.classList.add("osodos-layer-name-wrapper"),m.appendChild(w);let b=document.createElement("div");if(b.classList.add("osodos-opacity-controls-wrapper"),l.appendChild(m),e.showRangeSlider||e.showRangeSlider===void 0){let u=document.createElement("input");const y={"data-osdos":"layer-opacity-slider",type:"range",min:"0",max:"100",name:"opacity-slider",class:"osdos-layer-slider-range-input"};Object.keys(y).forEach(f=>{u.setAttribute(f,y[f])}),b.appendChild(u)}if(e.showNumberInput||e.showNumberInput===void 0){let u=document.createElement("input");const y={"data-osdos":"layer-opacity-slider-value",type:"number",min:"0",max:"100",name:"opacity-slider-value",class:"osdos-layer-slider-number-input"};Object.keys(y).forEach(f=>{u.setAttribute(f,y[f])}),b.appendChild(u)}l.appendChild(b);let E=s(a.source,e);e.viewer.world.getItemAt(E).osdosHidden&&(l.style="display: none;",p(E,0,e)),r.appendChild(l)}),document.querySelector("#opacitySliderWrapper").appendChild(r),document.querySelectorAll("[data-osdos='layer-opacity-slider']").forEach((a,d)=>{a.setAttribute("data-osd-index",d),["change","input"].forEach(l=>{a.addEventListener(l,m=>{p(d,m.target.value/100,e),(e.showNumberInput||e.showNumberInput===void 0)&&(document.querySelector(`[data-osdos='layer-opacity-slider-value'][data-osd-index='${d}']`).value=m.target.value)})})}),document.querySelectorAll("[data-osdos='layer-opacity-slider-value']").forEach((a,d)=>{a.setAttribute("data-osd-index",d),a.addEventListener("input",l=>{p(d,l.target.value/100,e),(e.showRangeSlider||e.showRangeSlider===void 0)&&(document.querySelector(`[data-osdos='layer-opacity-slider'][data-osd-index='${d}']`).value=l.target.value)})}),t.forEach((a,d)=>{let l=e.viewer.world.getItemAt(d).getOpacity();(e.showNumberInput||e.showNumberInput===void 0)&&(document.querySelector(`[data-osdos='layer-opacity-slider-value'][data-osd-index='${d}']`).value=l*100),(e.showRangeSlider||e.showRangeSlider===void 0)&&(document.querySelector(`[data-osdos='layer-opacity-slider'][data-osd-index='${d}']`).value=l*100)}),e.showLayerPicker||e.showLayerPicker===void 0){const a=document.createElement("button");a.className="osdos-layer-picker-button",a.innerHTML=e.layerPickerButtonText||"Layer Picker",a.addEventListener("click",g),r.appendChild(a)}q(e.viewer)}function g(){let e=document.getElementById("checkboxWrapperContent");e.style.display=e.style.display==="block"?"none":"block"}function c(e){let t=e.viewer.world.getItemCount(),r=[];for(let a=0;a<t;a++){let d=e.viewer.world.getItemAt(a),l=d.source.tilesUrl?`${d.source.tilesUrl.slice(0,-7)}.dzi`:d.source.url,m=e.layerInformation.filter(w=>w.source===l);r[a]=m[0]}return r}function s(e,t){let r=t.viewer.world.getItemCount();for(let a=0;a<r;a++){let d=t.viewer.world.getItemAt(a),l=d.source.tilesUrl?`${d.source.tilesUrl.slice(0,-7)}.dzi`:d.source.url;if(e===l)return a}return-1}function p(e,t,r){r.viewer.world.getItemAt(e).setOpacity(t)}function I(e,t){let r=s(e,t);r!==0&&(t.viewer.world.setItemIndex(t.viewer.world.getItemAt(r),r-1),o(t),t.viewer.world.getItemAt(r).osdosHidden&&I(e,t))}function k(e,t){let r=s(e,t);t.viewer.world.getItemCount()>r+1&&(t.viewer.world.setItemIndex(t.viewer.world.getItemAt(r),r+1),o(t),t.viewer.world.getItemAt(r).osdosHidden&&k(e,t))}function L(e,t){let r=s(e,t);p(r,0,t),t.viewer.world.getItemAt(r).osdosHidden=!0,o(t),(t.showLayerPicker||t.showLayerPicker===void 0)&&(document.querySelector(`[data-osdos-source="${e}"]`).checked=!1)}function P(e,t){let r=s(e,t);p(r,1,t),t.viewer.world.getItemAt(r).osdosHidden=!1,o(t),document.querySelector(`[data-osdos-source="${e}"]`).checked=!0}function H(e,t){let r=s(e.target.getAttribute("data-osdos-source"),t);e.target.checked&&r!=-1?P(e.target.getAttribute("data-osdos-source"),t):!e.target.checked&&r!=-1&&L(e.target.getAttribute("data-osdos-source"),t)}function q(e){document.querySelectorAll(".opacity-slider-disabled").forEach(a=>{a.classList.remove("osdos-curser-not-allowed"),a.disabled=!1});let t=document.querySelector("[data-osd-index='0'] [data-osdos='down-button']");t!==null&&(t.classList.add("osdos-curser-not-allowed"),t.disabled=!0);let r=document.querySelector(`[data-osd-index='${e.world.getItemCount()-1}'] [data-osdos='up-button']`);r!==null&&(r.classList.add("osdos-curser-not-allowed"),r.disabled=!0)}})(OpenSeadragon);let v=["images/example-image.png","images/example-image-bw.png"],h;function O(n){h=OpenSeadragon({id:"openseadragon1",showNavigationControl:!1}),h.addSimpleImage({url:v[1]}),h.addSimpleImage({url:v[0]});const i=[{layerName:"Example",layerNameExplanation:"This is a flower pot",source:v[0],hidden:!1},{layerName:"Black and White",layerNameExplanation:"This is a flower pot in Black&White",source:v[1],hidden:!1}],o=n||{sortable:!0,showRangeSlider:!0,showLayerPicker:!0,showNumberInput:!0,showRemove:!0,showLayerInformation:!0,layerPickerHeading:"Choose Layer",layerPickerButtonText:"Layer Picker"};console.log(o),h.opacityslider(A(C({},o),{layerInformation:i}))}O();function U(){h.destroy(),h=null,document.getElementById("opacitySliderWrapper").innerHTML=""}window.destroyOsd=U;window.initOsdOsPlugin=O;
